<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="with=device-width, initial-scale=1.0">
        
        <link rel ="stylesheet" href="../css/FAQ.css">
        <link rel="stylesheet" type="text/css" href="../css/darkmode.css" >
        <link rel="stylesheet" type="text/css" href="../css/dynamic-size.css" >

        <title>DrugHub | FAQ</title>

        <script src="../js/dynamicHeaderFooter.js"></script>

    </head>

    <body>
    <script src="../js/darkmode.js"></script>
    
    <div id="header"></div>

        <div class="white_space">


        </div>

        <section class="header">
  
            <div class ="text-box">
                <h1>Curious about DrugHub?</h1>
                <p> We won't bite! Ask Away! <br> </p>
                <input id = "searchField" type="text" placeholder="Tell me..."></a>
                <a href="#info" onclick = 'NLPResults()' class="log-btn log-btnFAQ">Ask</a>
            </div>
        </section>

        <section id="info" class="DrugFo">
            <h1>Frequently Asked Questions</h1>
            <p> Learn all about us</p>

            <div class="row">
                <div >
                    <img class="left" onclick = "previousResults()" src="../images/leftArrow.png">
                </div>
                
                <div class="col colFAQ" id = "el1"  onClick="showPopup(5)">
                    <a  href="#popup1">
                        <h3 id = "col1">What is DrugHub?</h3>
                    </a>
                    
                </div>
                

                <div class="col colFAQ"  id="el2" onClick="showPopup(4)">
                    <a  href="#popup1">
                    <h3 id = "col2">What is the subscription plan?</h3>
                    </a>
                </div>

                <div class="col colFAQ"  id = "el3" onClick="showPopup(3)">
                    <a  href="#popup1">
                        <h3 id= "col3">Why should I buy prescriptions from this site instead of at a pharmacy?</h3>
                    </a>
                </div>

                <div class="col colFAQ" id = "el4" onClick="showPopup(2)">
                    <a  href="#popup1">
                        <h3 id = "col4">Who are the creators of Drughub?</h3>
                    </a>
                </div>

                <div class="col colFAQ"  id = "el5" onClick="showPopup(1)">
                    <a  href="#popup1">
                        <h3 id = "col5">Is Abid the best damn coder out there?</h3>
                    </a>
                </div>
                <div >
                    <img class="right" onclick = "nextResults()" src="../images/rightArrow.png">
                </div>
            </div>

            <div id="popup1" class="overlay">
                <div class="popup">
                    <h2 id="articleTitle">Lorem ipsum dolor sit amet consectetur adipisicing elit. Repellat nihil rerum omnis nulla non odit esse quasi eius maiores fuga ducimus quod, optio repudiandae porro recusandae laudantium animi adipisci rem!</h2>
                    <div id="articleContent" class="content">
                        Lorem ipsum dolor sit amet consectetur, adipisicing elit. Culpa ad exercitationem nobis voluptates corporis quae amet incidunt sunt. Aliquam, vel. Quae tempore explicabo qui ea ut officia veniam aspernatur adipisci?
                    </div>
                    
                    <a  onclick="exit()" class="close" >Got it!</a>
                </div>
            </div>

        </section>




        <section class="another thing">
            <h1> </h1>
        </section>

        <div id="footer"></div>

        <script>

            var Articles = [];
            fetch(`/faq/articles`, {
                method: 'GET'
            })
            .then((response) => {
                if (response.status == 200){
                    response.json().then((json) => {
                        Articles=json;
                        globalindex = 0;
                        nextResults();
                        hideLeft();
                    })
                }
            })
        
        function NLPResults(){
            var searchQuery = document.getElementById("searchField").value
            
            fetch(`/faq/search?query=${searchQuery}`, {
                method: 'GET'
            })
            .then((response) => {
                if (response.status == 200){
                    response.json().then((json) => {
                        for(let i = 0; i < json.length; i ++){
                            console.log(json[i]);
                        }
                        Articles=json;
                        globalindex = 0;
                        nextResults();
                        hideLeft();
                    })
                }
            })
         }
            
   
            var navLinks = document.getElementById("navLinks");
            function showMenu(){
                navLinks.style.right="0";
            }

            function hideMenu(){
                navLinks.style.right="-200px";
            }

            function showPopup(x){
                result = Articles[globalindex - x];
                document.getElementById("articleTitle").innerText = result["title"]; 
                document.getElementById("articleContent").innerText = result["content"]; 
                document.querySelector('.overlay').style.opacity = 1;
                document.querySelector('.overlay').style.visibility = "visible";
            }

            function exit(){
            document.querySelector('.overlay').style.opacity = 0;
            document.querySelector('.overlay').style.visibility = "hidden";
            }

            function hideLeft(){
                document.querySelector('.left').style.opacity = 0;
                document.querySelector('.left').style.pointerEvents = "none";
            }
            function showLeft(){
                document.querySelector('.left').style.opacity = 1;
                document.querySelector('.left').style.pointerEvents = "auto";
            }

            function hideRight(){
                document.querySelector('.right').style.opacity = 0;
                document.querySelector('.right').style.pointerEvents = "none";
            }
            function showRight(){
                document.querySelector('.right').style.opacity = 1;
                document.querySelector('.right').style.pointerEvents = "auto";
            }
            
            function nextResults(){
                var count = 1;
                var max = globalindex +5;
                for(let i = globalindex; i< Object.keys(Articles).length && i < max; i++){
                    result = Articles[i];  
                    let column  = "col";
                    let temp = column.concat(String(count));
                    document.getElementById(temp).innerText = result["title"];
                    
                    column  = "el";
                    temp = column.concat(String(count));
                    document.getElementById(temp).style.opacity = 1;
                    document.getElementById(temp).style.pointerEvents = "auto";
                    count++;
                 }
                 globalindex +=5;
                 if(count != 6){
                    while(count != 6){
                        let column  = "el";
                        let temp = column.concat(String(count));
                        document.getElementById(temp).style.opacity = 0;
                        document.getElementById(temp).style.pointerEvents = "none";
                        count++;
                    }
                 }

                
                if(Object.keys(Articles).length - max <= 0)
                    hideRight();

                if(globalindex-5 != 0)
                    showLeft();
            }

            function previousResults(){

                globalindex -= 10;
                nextResults();

                showRight();
                if(globalindex - 5 == 0)
                    hideLeft();
            }
        
        </script>

    </body>

</html>