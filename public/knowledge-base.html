<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="with=device-width, initial-scale=1.0">
        <title>DrugHub!</title>
        <link rel ="stylesheet" href="./knowledge-base.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@1,300&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="./font-awesome-4.7.0/css/font-awesome.min.css">
    </head>

    <body>
        <section class="header">
            <nav>
                <a href="./homepage.html"><img src="../img/logo.png" ></a>
                <div class="nav-links" id="navLinks">
                    <i class="fa fa-times" onclick="hideMenu()"></i>
                    <ul>
                        <li><a href="./homepage.html">Home</a></li>
                        <li><a href="">Search</a></li>
                        <li><a href="">User</a></li>
                        <li><a href="">Cart</a></li>
                        <li><a href="">About</a></li>
                    </ul>
                </div>
                <i class="fa fa-bars" onclick="showMenu()"></i>
            </nav>

            <div class ="text-box">
                <h1>Welcome to the Drug Database</h1>
                <p> Got Questions? We got answers.<br> </p>
                <input id = "search_field" type="text" placeholder="Search..."></a>
                <button  id = "search_box"  class="log-btn">Find Out.</button>
            </div>
        </section>

        <section id="info" class="DrugFo">
            <h1>Search Results</h1>
            <p> Here's what we found:</p>

            <div class="row">
                <!-- <div class="col">
                    <h3>Viagara</h3>
                    <p> Sildenafil, sold under the brand name Viagra, among others, is a medication used to treat erectile dysfunction and pulmonary arterial hypertension. It is unclear if it is effective for treating sexual dysfunction in women. It is taken by mouth or by injection into a vein.</p>
                </div>

                <div class="col">
                    <h3>Adderall</h3>
                    <p> Adderall and Mydayis are trade names for a combination drug called mixed amphetamine salts containing four salts of amphetamine. The mixture is composed of equal parts racemic amphetamine and dextroamphetamine, which produces a ratio between dextroamphetamine and levoamphetamine, the two enantiomers of amphetamine.</p>
                </div>

                <div class="col">
                    <h3>Tylenol</h3>
                    <p> Paracetamol, also known as acetaminophen, is a medication used to treat fever and mild to moderate pain. Common brand names include Tylenol and Panadol. </p>
                </div>

                <div>
                    <h3>Tylenol</h3>
                    <p> Paracetamol, also known as acetaminophen, is a medication used to treat fever and mild to moderate pain. Common brand names include Tylenol and Panadol. </p>
                </div> -->

                <div class="card">
                    <!-- <img src="../img/img_avatar.png" alt="Avatar" style="width:100%"> -->
                    <div class="container">
                        <image id = "Thumbnail_1" src= "https://serpapi.com/searches/63dfb38c8ccee03eaf3c3af3/images/dae440aefeb2ddc0eaaa887d89a38e700d5ddc30a70fd1cb23ffe74443d2dba6.jpeg"  alt="Thumbnail" style="width:100%"></image>
                      <h4><b><a id = "displayed_link_1" href = "https://www.webmd.com/drugs/2/drug-63163/adderall-oral/details">https://www.webmd.com › drugs › adderall-oral › details</a></b></h4>
                      <p id = "title_1">Adderall Oral: Uses, Side Effects, Interactions ... - WebMD</p>
                      <p id = "snippet_1">This combination medication is used to treat attention deficit hyperactivity disorder - ADHD. It works by changing the amounts of certain natural substances ...</p>
                    </div>
                  </div>

                  <div class="card">
                    <!-- <img src="../img/img_avatar.png" alt="Avatar" style="width:100%"> -->
                    <div class="container">
                        <image id = "Thumbnail_2" src= "https://serpapi.com/searches/63dfb38c8ccee03eaf3c3af3/images/dae440aefeb2ddc0eaaa887d89a38e700d5ddc30a70fd1cb23ffe74443d2dba6.jpeg"  alt="Thumbnail" style="width:100%"></image>
                      <h4><b><a id = "displayed_link_2" href = "https://www.webmd.com/drugs/2/drug-63163/adderall-oral/details">https://www.webmd.com › drugs › adderall-oral › details</a></b></h4>
                      <p id = "title_2">Adderall Oral: Uses, Side Effects, Interactions ... - WebMD</p>
                      <p id = "snippet_2">This combination medication is used to treat attention deficit hyperactivity disorder - ADHD. It works by changing the amounts of certain natural substances ...</p>
                    </div>
                  </div>


                  <div class="card">
                    <!-- <img src="../img/img_avatar.png" alt="Avatar" style="width:100%"> -->
                    <div class="container">
                        <image id = "Thumbnail_3" src= "https://serpapi.com/searches/63dfb38c8ccee03eaf3c3af3/images/dae440aefeb2ddc0eaaa887d89a38e700d5ddc30a70fd1cb23ffe74443d2dba6.jpeg"  alt="Thumbnail" style="width:100%"></image>
                      <h4><b><a id = "displayed_link_3" href = "https://www.webmd.com/drugs/2/drug-63163/adderall-oral/details">https://www.webmd.com › drugs › adderall-oral › details</a></b></h4>
                      <p id = "title_3">Adderall Oral: Uses, Side Effects, Interactions ... - WebMD</p>
                      <p id = "snippet_3">This combination medication is used to treat attention deficit hyperactivity disorder - ADHD. It works by changing the amounts of certain natural substances ...</p>
                    </div>
                  </div>


                  
                  
        </section>




        <section class="another thing">
            <h1> </h1>
        </section>
    </body>
    <script>
        document.getElementById("search_box").addEventListener("click", function (){
            var query = document.getElementById("search_field").value

            var data = {
                query: query
            };

            fetch("/knowledgebase/search", {
                method: 'POST',
                cache: 'no-cache',
                headers:{
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            })
            .then((response ) => {
                if (response.status == 200){
                    response.json().then(json => {
                        var organic_results = json["organic_results"];
                        for (let i = 0; i < 3; i ++){
                            var result = organic_results[i];
                            let index = i + 1;
                            try{
                                var thumbnail = result["thumbnail"];
                                if (thumbnail == undefined){
                                    document.getElementById(`Thumbnail_${index}`).src = "../img/no_thumbnail.jpg"
                                }
                                else{
                                    document.getElementById(`Thumbnail_${index}`).src = thumbnail;
                                }
                                
                                
                            }
                            catch(e){
                                document.getElementById(`Thumbnail_${index}`).src = "../img/no_thumbnail.jpg"
                            }
                            document.getElementById(`displayed_link_${index}`).innerHTML = result["displayed_link"];
                            document.getElementById(`displayed_link_${index}`).href = result["link"];
                            document.getElementById(`title_${index}`).innerHTML = result["title"];
                            document.getElementById(`snippet_${index}`).innerHTML = result["snippet"];
                        }
                    })
                }

            })
        });

        var navLinks = document.getElementById("navLinks");
        function showMenu(){
            navLinks.style.right="0";
        }

        function hideMenu(){
            navLinks.style.right="-200px";
        }
    </script>

</html>