<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name="viewport" content="with=device-width, initial-scale=1.0" />
    <title>DrugHub!</title>
    <link rel="stylesheet" href="./dashboard.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@1,300&display=swap"rel="stylesheet"/>
    <link rel="stylesheet" href="./font-awesome-4.7.0/css/font-awesome.min.css"/>
    <link rel="stylesheet" type="text/css" href="./homepage-nav.css" />
    <link rel="stylesheet" type="text/css" href="./darkmode.css" />
    <link rel="stylesheet" type="text/css" href="./dynamic-size.css" />
  </head>

  <body>
    <header>
      <a href="./homepage.html"
        ><img src="../img/top_logo.png" class="logo" alt="logo"
      /></a>
      <img src="../img/bottom_logo.png" class="logo_name" alt="logo" />
      <nav>
        <ul class="nav_links">
          <li>
            <img
              onclick="toggleDarkMode()"
              class="moon"
              src="../img/moon.png"
              alt="picture of moon"
            />
          </li>
          <li>
            <div class="dropdown">
              <image
                class="profile"
                id="dropbtn"
                src="../img/profile.jpg"
                referrerpolicy="no-referrer"
              ></image>
              <div class="dropdown-content">
                <a onclick="handleUserManagingAccount()" class="drop_link"
                  >Manage Account</a
                >
                <a href="./PrescriptionRequest.html" class="drop_link"
                  >Request Prescriptions</a
                >
                <a href="#" class="drop_link">View Orders</a>
                <a href="#" id="Link6" onclick="logout()" class="drop_link"
                  >Log Out</a
                >
              </div>
            </div>
          </li>
          <li>
            <div class="dropdown">
              <a href="#" class="header_link">Medicines</a>
              <div class="dropdown-content">
                <a href="./knowledge-base.html" class="drop_link"
                  >Knowledge Base</a
                >
              </div>
            </div>
          </li>
          <li><a href="./deliverypage.html" class="header_link">Delivery</a></li>
          <li>
            <div class="dropdown">
              <a href="#" class="header_link">Our Service</a>
              <div class="dropdown-content">
                <a href="./FAQ.html" class="drop_link">FAQ</a>
              </div>
            </div>
          </li>
          <li><a href="#" class="header_link">Contact</a></li>
          <li>
            <a href="./OrderProcessing/Cart/store.html"
              ><button class="cart">Cart</button></a
            >
          </li>
        </ul>
      </nav>
    </header>

    <div id="sideMenu" class="sidebar">
      <a
        id="infoOption"
        class="active"
        href="#"
        onclick='swapDisplay("profile-info", "infoOption")'
        >Profile Information</a
      >
      <a
        id="orderOption"
        class=""
        href="#"
        onclick='swapDisplay("order-AND-prescription-info", "orderOption")'
        >Order/Prescription History</a
      >
      <a
        id="paymentOption"
        class=""
        href="#"
        onclick='swapDisplay("payment-info", "prescriptionOption")'
        >Payment Information</a
      >
      <a
        id="settingsOption"
        class=""
        href="#"
        onclick='swapDisplay("settings-info", "settingsOption")'
        >Settings</a
      >
      <a onclick="logout()">Logout</a>
    </div>

    <div id="interface" class="interface-container"></div>

    <!---PROFILE INFORMATION-->
    <div id="profile-info" class="info-container">
      <section id="info" class="DrugFo">
        <image
          id="profile-pic"
          class="profile-pic"
          src="./FAQ_img/profile.jpg"
        ></image>
        <h1 id="welcome-text">Welcome, Anonymous!</h1>

        <div class="row">
          <h2>Personal Information:</h2>
          <div class="col">
            <h3>Full Name</h3>
            <p id="full-name">Some Random Full Name</p>
            <hr />

            <h3>Email</h3>
            <p id="email">randomassemail@random.com</p>
            <hr />

            <h3>Address</h3>
            <p>220 Poopoo Pl, Kailua, HI 96734</p>
            <hr />

            <h3>Phone</h3>
            <p>666-420-6666</p>
          </div>

        </div>
      </section>
    </div>



    <!---ORDER INFORMATION-->
    <div id="order-AND-prescription-info" class="info-container">
      <section id="info" class="DrugFo">
        <div class="row">
          <h2>Recent Orders:</h2>
         
          <div class="OrderTable">
            <table id="ordersList">
              <tr style = "color:white; background-color:#2c2c2c;">
                <th>Order Number</th>
                <th width = "150%">Items</th>
                <th>Status</th>
               
              </tr>
              <tr>
                <td>69420</td>
                <td>Tylenol x1 <br> Iburprofen x2 <br> Rubbing Alcohol x3</td>
                <td>Not Delivered</td>
                
              </tr>
              <tr>
                <td>69421</td>
                <td>Iburprofen x1</td>
                <td>Processing</td>
              </tr>
              <tr>
                <td>69422</td>
                <td>Viagra x1</td>
                <td>Delivered</td>
              </tr>
            </table>
          </div>
    </div>

    <div class="row">
      <h2>Recent Prescriptions:</h2>
     
      <div class="OrderTable">
        <table id="prescriptionList">
          <tr style = "color:white; background-color:#8fc0e3;">
            <th>Prescription ID</th>
            <th width = "150%">Items</th>
            <th>Prescriber</th>
            <th>Approval Status</th>
           
          </tr>
          <tr>
            <td>42069</td>
            <td>Tylenol x1 <br> Iburprofen x2 <br> Rubbing Alcohol x3</td>
            <td>Dr. Ravi</td>
            <td>Approved</td>
            
          </tr>
          <tr>
            <td>42070</td>
            <td>Iburprofen x1</td>
            <td>Dr. Jeff</td>
            <td>Pending</td>
          </tr>
          <tr>
            <td>42071</td>
            <td>Viagra x1</td>
            <td>Dr. Mayank</td>
            <td>Denied</td>
          </tr>
        </table>
      </div>
</div>
      </section>
    </div>


    <!---PAYMENT INFORMATION-->
    <div id="payment-info" class="info-container">
      <section id="info" class="DrugFo">
        <div class="row">
          <h2>Saved Card Info:</h2>
         
          <div class="OrderTable">
            <table id="paymentList">
              <tr style = "color:white; background-color:#4b7a5b;">
                <th>Name on Card</th>
                <th>Card Number</th>
                <th>Billing Address</th>
                <th>Shipping Address</th>
               
              </tr>
              <tr>
                <td>Ravi Ragahavan</td>
                <td>---- ---- ---- 4201</td>
                <td>Some Random Obscure Address</td>
                <td>Some Random Obscure Address</td>
                
              </tr>
            </table>
          </div>
    </div>
        <div class="paymentRow">
          <div class="row">
            <div class="col-75">
              <div class="container">
                <form action="/action_page.php">
          
                  <div class="row">
                    <div class="col-50">
                      <h3>Billing Address</h3>
                      <label for="fname"><i class="fa fa-user"></i> Full Name</label>
                      <input type="text" id="fname" name="firstname" placeholder="John M. Doe">
                      <label for="email"><i class="fa fa-envelope"></i> Email</label>
                      <input type="text" id="email" name="email" placeholder="john@example.com">
                      <label for="adr"><i class="fa fa-address-card-o"></i> Address</label>
                      <input type="text" id="adr" name="address" placeholder="542 W. 15th Street">
                      <label for="city"><i class="fa fa-institution"></i> City</label>
                      <input type="text" id="city" name="city" placeholder="New York">
          
                      <div class="row">
                        <div class="col-50">
                          <label for="state">State</label>
                          <input type="text" id="state" name="state" placeholder="NY">
                        </div>
                        <div class="col-50">
                          <label for="zip">Zip</label>
                          <input type="text" id="zip" name="zip" placeholder="10001">
                        </div>
                      </div>
                    </div>
          
                    <div class="col-50">
                      <h3>Payment</h3>
                      <label for="fname">Accepted Cards</label>
                      <div class="icon-container">
                        <i class="fa fa-cc-visa" style="color:navy;"></i>
                        <i class="fa fa-cc-amex" style="color:blue;"></i>
                        <i class="fa fa-cc-mastercard" style="color:red;"></i>
                        <i class="fa fa-cc-discover" style="color:orange;"></i>
                      </div>
                      <label for="cname">Name on Card</label>
                      <input type="text" id="cname" name="cardname" placeholder="John More Doe">
                      <label for="ccnum">Credit card number</label>
                      <input type="text" id="ccnum" name="cardnumber" placeholder="1111-2222-3333-4444">
                      <label for="expmonth">Exp Month</label>
                      <input type="text" id="expmonth" name="expmonth" placeholder="September">
          
                      <div class="row">
                        <div class="col-50">
                          <label for="expyear">Exp Year</label>
                          <input type="text" id="expyear" name="expyear" placeholder="2018">
                        </div>
                        <div class="col-50">
                          <label for="cvv">CVV</label>
                          <input type="text" id="cvv" name="cvv" placeholder="352">
                        </div>
                      </div>
                    </div>
          
                  </div>
                  <label>
                    <input type="checkbox" checked="checked" name="sameadr"> Shipping address same as billing
                  </label>
                  <input type="submit" value="Add Card Information" class="btn">
                </form>
              </div>
            </div>
        </div>
      </section>
    </div>

    
    <!---SETTINGS INFORMATION-->
    <div id="settings-info" class="info-container">
      <section id="info" class="DrugFo">
        <div class="row">
          <h2>Placeholder: You're look at the settings menu.</h2>
        </div>
      </section>
    </div>
  </body>

  <script>
    
    function toggleDarkMode() {
      const body = document.body;
      body.classList.toggle("dark");
    }

    function logout() {
      localStorage.removeItem("User Record");
      window.location.href = "./logoutPage.html";
    }

    window.onload = function () {
      
      document.getElementById("interface").innerHTML =
        document.getElementById("profile-info").innerHTML;
      if (localStorage.getItem("User Record") == null) {
        //
      } else {
        var user_record = JSON.parse(localStorage.getItem("User Record"));
        var profilePicture = user_record.photoURL;
        
        document.getElementById("profile-pic").src = profilePicture;
        document.getElementById("profile").src = profilePicture;
        document.getElementById("welcome-text").innerHTML =
          user_record.displayName;
        document.getElementById("full-name").innerHTML =
          user_record.displayName;
        document.getElementById("email").innerHTML = user_record.email;
      }
      
    };

    function swapDisplay(location, menuOption) {
      var links = document.getElementById("sideMenu").getElementsByTagName("a");
      for (i = 0; i < links.length; i++) {
        links[i].className = "";
      }
      document.getElementById("interface").innerHTML =
        document.getElementById(location).innerHTML;
      document.getElementById(menuOption).className = "active";
    }

    //HELPER FUNCTION TO ADD ORDERS TO ORDER TABLE
    //Params: Integer (Order Number), Array of Strings (List of Items and Quanitity), String (Order Status)
    //Usage Example: addOrder(599212, ["Drug1 x2", "Drug2 x3"], "Delivered");
    function addOrder(OrderNumber, ItemList, Status){
      if(OrderNumber == null || ItemList == null || ItemList.length == 0||Status == null)
        return;
      
      else{
        var rows = '<tr><td>'+ String(OrderNumber) +'</td><td>';
          size = ItemList.length;
          for(i = 0; i < size; i++){
            rows = rows+(ItemList[i]);
            
            if(i != (size-1))
            rows= rows+ ( "<br>");
          }
          rows= rows +( '</td><td>'+Status+'</td></tr>');
          var table = document.getElementById('ordersList');
          var template = document.createElement('template');
          template.innerHTML = rows;
          console.log(rows);
          table.append(template.content);
          
          return;
      }
      
      
    }
  
    //HELPER FUNCTION TO ADD PRESCRIPTIONS TO PRESCRIPTION TABLE
    //Params: Integer (Prescription Number), Array of Strings (List of Items and Quanitity), String (Name of Prescriber), String (Approval Status)
    //Usage Example: addOrder(599212, ["Drug1 x2", "Drug2 x3"], "Dr. Doctor","Delivered");
    function addPrescription(PrescriptionNumber, ItemList, PrescriberName, Approval){
      if(PrescriptionNumber == null || ItemList == null || ItemList.length == 0||PrescriberName == null || Approval == null)
        return;
      
      else{
        var rows = '<tr><td>'+ String(PrescriptionNumber) +'</td><td>';
          size = ItemList.length;
          for(i = 0; i < size; i++){
            rows = rows+(ItemList[i]);
            
            if(i != (size-1))
            rows= rows+ ( "<br>");
          }
          rows= rows +( '</td><td>'+PrescriberName+'</td><td>'+Approval+'</td></tr>');
          var table = document.getElementById('prescriptionList');
          var template = document.createElement('template');
          template.innerHTML = rows;
          console.log(rows);
          table.append(template.content);
          
          return;
      }
    }
    addOrder(69423, ["Viagra x1", "Iburprofen x2"], "Delivered");
    addPrescription(42072, ["Rubbing Alchohol x3", "CBD x7"],"Dr. DicBud", "Denied");
  </script>
</html>
